(function(e){function t(t){for(var r,c,i=t[0],o=t[1],u=t[2],d=0,p=[];d<i.length;d++)c=i[d],a[c]&&p.push(a[c][0]),a[c]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);l&&l(t);while(p.length)p.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,i=1;i<n.length;i++){var o=n[i];0!==a[o]&&(r=!1)}r&&(s.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={app:0},s=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],o=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=o;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"023d":function(e,t,n){"use strict";var r=n("404d"),a=n.n(r);a.a},"034f":function(e,t,n){"use strict";var r=n("64a9"),a=n.n(r);a.a},"07b1":function(e,t,n){"use strict";var r=n("bfef"),a=n.n(r);a.a},1:function(e,t){},"131e":function(e,t,n){"use strict";var r=n("a0b2"),a=n.n(r);a.a},"1f6d":function(e,t,n){},2:function(e,t){},2678:function(e,t,n){},3:function(e,t){},"3ed5":function(e,t,n){"use strict";var r=n("2678"),a=n.n(r);a.a},4:function(e,t){},"404d":function(e,t,n){},"4c62":function(e,t,n){"use strict";var r=n("8b6b"),a=n.n(r);a.a},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("MenuBar"),n("Content")],1)},s=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"menu"},[n("div",{staticClass:"menu-bar"},[e._m(0),e.user?n("div",{staticClass:"user"},[n("span",{staticClass:"username",domProps:{textContent:e._s(e.user.username+" ("+e.user.role+")")}}),n("i",{staticClass:"fas fa fa-sign-out menu-icon signout",on:{click:e.logOut}})]):e._e()])])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-name"},[n("p",[e._v("RestRace")])])}],o=(n("96cf"),n("3b8d")),u=n("795b"),l=n.n(u),d=n("d225"),p=n("b0b4"),h=n("bc3a"),f=n.n(h),m="/api/auth/",v=function(){function e(){Object(d["a"])(this,e)}return Object(p["a"])(e,null,[{key:"addUser",value:function(e){return new l.a(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(n,r){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.post(m+"signup/",e);case 3:a=t.sent,n(a),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),r(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e,n){return t.apply(this,arguments)}}())}},{key:"Login",value:function(e){return new l.a(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(n,r){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.post(m+"login/",e);case 3:a=t.sent,n(a),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),r(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e,n){return t.apply(this,arguments)}}())}},{key:"getLoggedInUser",value:function(e){return new l.a(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(n,r){var a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.get(m+e.token);case 3:a=t.sent,s=a.data,n(s),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),r(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e,n){return t.apply(this,arguments)}}())}}]),e}(),g=v,b={name:"MenuBar",data:function(){return{user:null}},methods:{getLoggedInUser:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g.getLoggedInUser({token:localStorage.token}).then(function(e){e.user&&(t.user=e.user)});case 2:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),logOut:function(){localStorage.clear(),this.user=null,location.reload(),this.$router.push({name:"Login"})}},mounted:function(){},created:function(){localStorage.token&&this.getLoggedInUser()}},w=b,y=(n("3ed5"),n("2877")),_=Object(y["a"])(w,c,i,!1,null,"759aea76",null),k=_.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("router-view")],1)},R=[],C=(n("07b1"),{}),O=Object(y["a"])(C,x,R,!1,null,null,null),j=O.exports,S={name:"app",components:{Content:j,MenuBar:k}},E=S,M=(n("034f"),Object(y["a"])(E,a,s,!1,null,null,null)),$=M.exports,P=(n("7f7f"),n("8c4f")),I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"racesPage"},[n("div",{staticClass:"header"},[n("h1",[e._v("Races")]),n("router-link",{attrs:{to:{name:"NewRace"}}},[n("button",{staticClass:"btn btn-primary"},[e._v("Add Race")])])],1),e.errorMessage?n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v("\n      "+e._s(e.errorMessage)+"\n  ")]):e._e(),n("table",{staticClass:"table"},[e._m(0),e._l(e.races,function(t,r){return n("tr",{key:t._id},[n("td",{domProps:{textContent:e._s(t.title)}}),n("td",{staticStyle:{"text-align":"center"}},[n("router-link",{attrs:{to:{name:"EditRace",params:{race:t._id,created_by:t.created_by.username}}}},[t.created_by.username===e.user.username||"admin"===e.user.role?n("i",{staticClass:"fa fa-edit"}):e._e()])],1),n("td",{staticStyle:{"text-align":"center"}},[t.created_by.username===e.user.username&&!1===t.started||"admin"===e.user.role&&!1===t.started?n("i",{staticClass:"fa fa-play-circle text-success",on:{click:function(n){return e.startRace(t,r)}}}):e._e()]),n("td",{staticStyle:{"text-align":"center"}},[n("router-link",{attrs:{to:{name:"ProgressRace",params:{id:t._id}}}},[!0===t.started?n("i",{staticClass:"fa fa-tasks text-secondary"}):e._e()])],1)])})],2)])},A=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[n("th",{attrs:{width:"70%"}},[e._v("Races")]),n("th",{staticStyle:{"text-align":"center"},attrs:{width:"10%"}},[e._v("Edit")]),n("th",{staticStyle:{"text-align":"center"},attrs:{width:"10%"}},[e._v("Start")]),n("th",{staticStyle:{"text-align":"center"},attrs:{width:"10%"}},[e._v("Progress")])])}],L=(n("386d"),"/api/races/"),U={headers:{Authorization:"Bearer "+localStorage.token}},W=function(){function e(){Object(d["a"])(this,e)}return Object(p["a"])(e,null,[{key:"getRaces",value:function(){var e=new URLSearchParams(window.location.search);return new l.a(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(n,r){var a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.get(L+"?"+e);case 3:a=t.sent,s=a.data,n(s),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),r(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e,n){return t.apply(this,arguments)}}())}},{key:"getRace",value:function(e){return new l.a(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(n,r){var a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.get(L+e.id);case 3:a=t.sent,s=a.data,n(s),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),r(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e,n){return t.apply(this,arguments)}}())}},{key:"addRace",value:function(e){return new l.a(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(n,r){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.post(L,e,U);case 3:a=t.sent,n(a),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),r(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e,n){return t.apply(this,arguments)}}())}},{key:"updateRace",value:function(e){return new l.a(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(n,r){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.put(L+e.id,e,U);case 3:a=t.sent,n(a),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),r(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e,n){return t.apply(this,arguments)}}())}},{key:"startRace",value:function(e){return new l.a(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(n,r){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.put(L+"start/"+e.id,e,U);case 3:a=t.sent,n(a),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),r(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e,n){return t.apply(this,arguments)}}())}},{key:"createStartedRace",value:function(e){return new l.a(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(n,r){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.post(L+"start/",e,U);case 3:a=t.sent,n(a),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),r(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e,n){return t.apply(this,arguments)}}())}},{key:"getStartedRace",value:function(e){return new l.a(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(n,r){var a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.get(L+"started/"+e.id);case 3:a=t.sent,s=a.data,n(s),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),r(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e,n){return t.apply(this,arguments)}}())}},{key:"checkIn",value:function(e){return new l.a(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(n,r){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.put(L+"checkin/"+e.id,e,U);case 3:a=t.sent,n(a),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),r(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e,n){return t.apply(this,arguments)}}())}}]),e}(),N=W,T=n("8055"),D=n.n(T),q={name:"Races",props:{user:{type:Object,required:!0}},data:function(){return{races:[],error:"",socket:D.a.connect(),errorMessage:""}},methods:{startRace:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,N.startRace({id:t._id,token:localStorage.token,created_by:t.created_by}).then(function(e){e.data.success&&(r.socket.emit("RACE_STARTED",{index:n}),r.createStartedRace(t))}).catch(function(e){r.errorMessage=e.response.data.message});case 2:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),createStartedRace:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,N.createStartedRace({race:t}).then(function(e){!0===e.data.success&&n.$router.push({name:"ProgressRace",params:{id:t._id}})}).catch(function(e){n.errorMessage=e.response.data.message});case 2:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},mounted:function(){var e=this;this.socket.on("RACE",function(t){e.races.push(t.race)}),this.socket.on("RACE_START",function(t){e.races[t].started=!0})},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.getRaces();case 3:this.races=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.error=e.t0.message;case 9:case"end":return e.stop()}},e,this,[[0,6]])}));function t(){return e.apply(this,arguments)}return t}()},B=q,G=(n("6a1b"),Object(y["a"])(B,I,A,!1,null,"587ea106",null)),H=G.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"races"},[n("div",{staticClass:"header"},[n("h1",[e._v("Log in")]),e.errorMessage?n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v("\n        "+e._s(e.errorMessage)+"\n    ")]):e._e()]),n("div",{staticClass:"form"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"Username",required:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),n("div",{staticClass:"save"},[n("button",{staticClass:"btn btn-secondary sign-up",on:{click:e.signUp}},[e._v("Sign up")]),n("button",{staticClass:"btn btn-primary log-in",on:{click:e.logIn}},[e._v("Log in")]),n("div",{staticStyle:{clear:"both"}})])])},K=[],V={name:"Login",data:function(){return{username:"",password:"",errorMessage:""}},methods:{logIn:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g.Login({username:this.username,password:this.password}).then(function(e){e.data.success&&(localStorage.token=e.data.token,location.reload(),t.$router.push({name:"Races"}))}).catch(function(e){t.errorMessage=e.response.data.message});case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),signUp:function(){this.$router.push({name:"Signup"})}},mounted:function(){},created:function(){}},z=V,F=(n("eb24"),Object(y["a"])(z,J,K,!1,null,"406dcfd9",null)),Q=F.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"races"},[n("div",{staticClass:"header"},[n("h1",[e._v("Sign up")]),e.errorMessage?n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v("\n        "+e._s(e.errorMessage)+"\n    ")]):e._e()]),n("div",{staticClass:"form"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"Username",required:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),n("div",{staticClass:"save"},[n("button",{staticClass:"btn btn-primary sign-up",on:{click:e.signUp}},[e._v("Sign up")]),n("button",{staticClass:"btn btn-secondary log-in",on:{click:e.logIn}},[e._v("Log in")]),n("div",{staticStyle:{clear:"both"}})])])},Y=[],Z=n("7618"),ee={name:"Signup",data:function(){return{username:"",password:"",errorMessage:""}},methods:{signUp:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(""===this.username||""===this.password){e.next=5;break}return e.next=3,g.addUser({username:this.username,password:this.password}).then(function(e){e.data.success&&t.$router.push({name:"Login"})}).catch(function(e){"object"===Object(Z["a"])(e.response.data.message)?t.errorMessage=e.response.data.message.message:t.errorMessage=e.response.data.message});case 3:e.next=6;break;case 5:this.errorMessage="Username and/or password needs to be filled in";case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),logIn:function(){this.$router.push({name:"Login"})}},mounted:function(){},created:function(){}},te=ee,ne=(n("023d"),Object(y["a"])(te,X,Y,!1,null,"cda79a50",null)),re=ne.exports,ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"races"},[n("div",{staticClass:"header"},[n("h1",[e._v("Add Race")]),e.errorMessage?n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v("\n        "+e._s(e.errorMessage)+"\n    ")]):e._e()]),n("div",{staticClass:"form"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],attrs:{type:"text",name:"title",placeholder:"TITLE"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}}),n("br"),n("vue-google-autocomplete",{ref:"address",attrs:{id:"map",classname:"search-location",placeholder:"Search",types:"establishment",country:"nl"},on:{placechanged:e.getAddressData}}),n("div",[e.address?n("button",{attrs:{type:"button"},on:{click:e.clearAddress}},[n("i",{staticClass:"fa fa-trash text-danger"})]):e._e(),e.address?n("button",{attrs:{type:"button"},on:{click:e.addAddress}},[n("i",{staticClass:"fa fa-plus text-success"})]):e._e()])],1),e.waypoints.length?n("div",[n("h2",[e._v("Added waypoints")]),n("table",{staticClass:"table"},[e._m(0),e._l(e.waypoints,function(t,r){return n("tr",{key:r},[n("td",{staticStyle:{"text-align":"left"},domProps:{textContent:e._s(t.name)}}),n("td",[n("i",{staticClass:"fa fa-trash text-danger",on:{click:function(t){return e.removeWaypoint(r)}}})])])})],2)]):e._e(),n("div",{staticClass:"save"},[n("button",{staticClass:"btn btn-success create",on:{click:e.addRace}},[e._v("Create")]),n("router-link",{attrs:{to:{name:"Races"}}},[n("button",{staticClass:"btn btn-danger cancel"},[e._v("Cancel")])]),n("div",{staticStyle:{clear:"both"}})],1)])},se=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[n("th",[e._v("Waypoint")]),n("th")])}],ce=n("0118"),ie={name:"NewRace",components:{VueGoogleAutocomplete:ce["a"]},data:function(){return{title:"",waypoints:[],address:"",errorMessage:"",user:{},socket:D.a.connect()}},methods:{addRace:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!(""===this.title||this.waypoints.length<=0)){e.next=4;break}this.errorMessage="The titel can not be empty, and there needs to be atleast one waypoint",e.next=6;break;case 4:return e.next=6,N.addRace({title:this.title,waypoints:this.waypoints,created_by:this.user}).then(function(e){e.data.success&&(t.socket.emit("ADDED_RACE",{race:e.data.race}),t.$router.push({name:"Races"}))}).catch(function(e){t.errorMessage=e.response.data.message});case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),removeWaypoint:function(e){this.waypoints.splice(e,1)},getAddressData:function(e){this.address=e},clearAddress:function(){this.$refs.address.clear(),this.address=""},addAddress:function(){this.$set(this.address,"name",this.$refs.address.$refs.autocomplete.value),this.waypoints.push(this.address),this.clearAddress()},getLoggedInUser:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g.getLoggedInUser({token:localStorage.token}).then(function(e){if(e.user)return t.user.username=e.user.username,t.user._id=e.user._id,t.user}).catch(function(e){t.errorMessage=e.response.data.message});case 2:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){this.$refs.address.focus(),this.getLoggedInUser()}},oe=ie,ue=(n("4c62"),Object(y["a"])(oe,ae,se,!1,null,"1e1eef70",null)),le=ue.exports,de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"races"},[n("div",{staticClass:"header"},[n("h1",[e._v("Edit Race")]),n("h2",{domProps:{textContent:e._s(e.race.title)}}),e.errorMessage?n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v("\n        "+e._s(e.errorMessage)+"\n    ")]):e._e()]),n("div",{staticClass:"form"},[n("div",[n("vue-google-autocomplete",{ref:"address",attrs:{id:"map",classname:"search-location",placeholder:"Nieuw waypoint",types:"establishment",country:"nl"},on:{placechanged:e.getAddressData}})],1),n("div",[e.address?n("button",{attrs:{type:"button"},on:{click:e.clearAddress}},[n("i",{staticClass:"fa fa-trash text-danger"})]):e._e(),e.address?n("button",{attrs:{type:"button"},on:{click:e.addAddress}},[n("i",{staticClass:"fa fa-plus text-success"})]):e._e()])]),n("table",{staticClass:"table"},[e._m(0),e._l(e.tempWaypoints,function(t,r){return n("tr",{key:r},[n("td",{domProps:{textContent:e._s(t.name)}}),n("td",[n("i",{staticClass:"fa fa-trash text-danger",on:{click:function(t){return e.removeWaypoint(r)}}})])])})],2),n("div",{staticClass:"save"},[n("button",{staticClass:"btn btn-success update",on:{click:e.updateRace}},[e._v("Update")]),n("router-link",{attrs:{to:{name:"Races"}}},[n("button",{staticClass:"btn btn-danger cancel"},[e._v("Cancel")])]),n("div",{staticStyle:{clear:"both"}})],1)])},pe=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[n("th",[e._v("Waypoint")]),n("th")])}],he={name:"EditRace",components:{VueGoogleAutocomplete:ce["a"]},data:function(){return{race:[],tempWaypoints:[],address:"",errorMessage:""}},methods:{getRace:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,N.getRace({id:this.$route.params.race});case 2:t=e.sent,this.race=t,this.tempWaypoints=this.race.waypoints;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),updateRace:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.tempWaypoints.length<=0)){e.next=4;break}this.errorMessage="There needs to be atleast one waypoint",e.next=6;break;case 4:return e.next=6,N.updateRace({id:this.$route.params.race,waypoints:this.tempWaypoints,token:localStorage.token,created_by:this.race.created_by}).then(function(e){e.data.success&&t.$router.push({name:"Races"})}).catch(function(e){t.errorMessage=e.response.data.message});case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getAddressData:function(e){this.address=e},clearAddress:function(){this.$refs.address.clear(),this.address=""},addAddress:function(){this.$set(this.address,"name",this.$refs.address.$refs.autocomplete.value),this.tempWaypoints.push(this.address),this.clearAddress()},removeWaypoint:function(e){this.tempWaypoints.splice(e,1)}},mounted:function(){this.getRace()},created:function(){}},fe=he,me=(n("131e"),Object(y["a"])(fe,de,pe,!1,null,"266039a3",null)),ve=me.exports,ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"races"},[n("div",{staticClass:"header"},[n("h1",[e._v("Race Progress")]),n("h2",{domProps:{textContent:e._s(e.race.title)}}),n("router-link",{attrs:{to:{name:"Races"}}},[n("button",{staticClass:"btn btn-primary"},[e._v("Back")])]),e.errorMessage?n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v("\n        "+e._s(e.errorMessage)+"\n    ")]):e._e()],1),n("table",{staticClass:"table"},[e._m(0),e._l(e.race.waypoints,function(t,r){return n("tr",{key:r},[n("td",{staticStyle:{"text-align":"left"},domProps:{textContent:e._s(t.name)}}),n("td",[e.notCheckedIn(r)?n("i",{staticClass:"fa fa-check-square text-success",on:{click:function(t){return e.checkIn(r)}}}):e._e()])])})],2),e.allCheckIns.length?n("div",[n("table",{staticClass:"table"},[e._m(1),e._l(e.allCheckIns,function(t,r){return n("tr",{key:r},[n("td",{staticStyle:{"text-align":"left"},domProps:{textContent:e._s(t)}})])})],2)]):e._e()])},be=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[n("th",{attrs:{width:"90%"}},[e._v("Waypoint")]),n("th",{staticStyle:{"text-align":"center"},attrs:{width:"10%"}},[e._v("Check in")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[n("th",{attrs:{width:"90%"}},[e._v("Check-ins")])])}],we={name:"ProgressRace",props:{user:{type:Object,required:!0}},data:function(){return{race:{},socket:D.a.connect(),allCheckIns:[],errorMessage:""}},methods:{getRace:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,N.getStartedRace({id:this.$route.params.id});case 2:t=e.sent,this.race=t.race,this.fillCheckInLog();case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),checkIn:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.race.waypoints[t].check_ins.push({id:this.user._id,username:this.user.username}),e.next=3,N.checkIn({id:this.race._id,user:{_id:this.user._id,username:this.user.username},waypoint:t}).then(function(e){e.data.success&&n.socket.emit("CHECKED_IN",{waypoint:n.race.waypoints[t].name,username:n.user.username})}).catch(function(e){n.errorMessage=e.response.data.message});case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),notCheckedIn:function(e){for(var t=0;t<this.race.waypoints[e].check_ins.length;t++)if(this.race.waypoints[e].check_ins[t].username===this.user.username)return!1;return!0},fillCheckInLog:function(){for(var e=0;e<this.race.waypoints.length;e++)if(this.race.waypoints[e].check_ins)for(var t=0;t<this.race.waypoints[e].check_ins.length;t++)this.allCheckIns.push(this.race.waypoints[e].check_ins[t].username+" has checked in at "+this.race.waypoints[e].name)}},mounted:function(){var e=this;this.socket.on("CHECK_IN",function(t){e.allCheckIns.push(t.username+" has checked in at "+t.waypoint)})},created:function(){this.getRace()}},ye=we,_e=(n("830b"),Object(y["a"])(ye,ge,be,!1,null,"38b7f1ab",null)),ke=_e.exports,xe=n("9ed4");function Re(e,t,n){var r=je();r.loggedIn?n({name:"Races"}):n()}function Ce(e,t,n){localStorage.token?"EditRace"===e.name?Oe(e.params.created_by,je().username,n):n():n({name:"Login"})}function Oe(e,t,n){e===t||"admin"===je().role?n():n({name:"Races"})}function je(){return!!localStorage.token&&xe.decode(localStorage.token,{complete:!0}).payload}r["a"].use(P["a"]);var Se=new P["a"]({mode:"history",routes:[{path:"/",name:"Races",props:{user:je()},component:H,beforeEnter:Ce},{path:"/auth/signup",name:"Signup",component:re,beforeEnter:Re},{path:"/auth/login",name:"Login",component:Q,beforeEnter:Re},{path:"/new",name:"NewRace",component:le,beforeEnter:Ce},{path:"/edit/:race/:created_by",name:"EditRace",component:ve,beforeEnter:Ce},{path:"/progress/:id",name:"ProgressRace",component:ke,props:{user:je()},beforeEnter:Ce}]});n("f9e3"),n("7f10");r["a"].config.productionTip=!1,new r["a"]({router:Se,render:function(e){return e($)}}).$mount("#app")},"64a9":function(e,t,n){},"6a1b":function(e,t,n){"use strict";var r=n("e418"),a=n.n(r);a.a},"830b":function(e,t,n){"use strict";var r=n("1f6d"),a=n.n(r);a.a},"8b6b":function(e,t,n){},a0b2:function(e,t,n){},b843:function(e,t,n){},bfef:function(e,t,n){},e418:function(e,t,n){},eb24:function(e,t,n){"use strict";var r=n("b843"),a=n.n(r);a.a}});
//# sourceMappingURL=app.eae1b60f.js.map